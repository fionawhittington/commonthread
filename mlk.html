<!doctype html>

<html class="" ng-app="mainApp">
<head>
  <meta charset="utf-8">
  <title>MLK - BU Common Thread</title>
  <meta name="description" content="In this episode of The Common Thread Podcast, we explore the lesser known topics of Martin Luther King, particularly in the last year of his life">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link rel="icon" href="favicon@1x.png" type="image/png" sizes="16x16">
  <link rel="icon" href="favicon@2x.png" type="image/png" sizes="128x128">
  <link rel="icon" href="favicon@4x.png" type="image/png" sizes="512x512">
  
  <link rel="stylesheet" href="libs/bootstrap/dist/css/bootstrap.min.css"/>
  <link rel="stylesheet" href="style.css"/>
  <link rel="stylesheet" href="libs/font-awesome/css/font-awesome.min.css">

  <script src="libs/jquery/dist/jquery.min.js"></script>
  <script src="libs/bootstrap/dist/js/bootstrap.min.js"></script>
<!--   <script src="libs/angular/angular.min.js"></script> -->

	<!-- Base Angular Code -->
	
  <script src="js/app.js"></script>

	<!-- Controllers -->
	
	<script src="js/MainController.js"></script>
	
	<!-- 	GA tag -->
	
	<script>
	  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
	
	  ga('create', 'UA-67825496-3', 'auto');
	  ga('send', 'pageview');
	</script>
	
<!-- 	For Facebook share button -->

	<meta property="og:url"           content="http://www.your-domain.com/your-page.html" />
	<meta property="og:type"          content="website" />
	<meta property="og:title"         content="Your Website Title" />
	<meta property="og:description"   content="Your description" />
	<meta property="og:image"         content="http://www.your-domain.com/path/image.jpg" />
	
</head>
<body>
	
	<div class="container navbar-top">
		<nav class="navbar navbar-default navbar-fixed-top">  
			<div class="container-fluid"> 
				<div class="navbar-header"> 
					<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-6" aria-expanded="false">
						<span class="sr-only">Toggle navigation</span> 
						<span class="icon-bar"></span> 
						<span class="icon-bar"></span> 
						<span class="icon-bar"></span> 
					</button>
					<a class="navbar-brand" href="#">The Common Thread Podcast</a> 
				</div> 
				
				<div class="collapse navbar-collapse" id="bs-example-navbar-collapse-6"> 
					<ul class="nav navbar-nav pull-right"> 
						<li><a href="/">Home</a></li> 
						<li><a href="/episodes">Episodes</a></li> 
						<li><a href="/about">About us</a></li> 
					</ul> 
				</div> 
			</div> 
		</nav>
	</div>
	
	<!-- 	BEGIN CONTENT -->
	<div class="container episode-container">
		<div class="row">
			<div class="col-md-4 col-sm-12 episode-image">
				<img src="img/mlk-lg.jpg" class="bg" alt="">
			</div>
			<div class="col-md-8 col-sm-12">
				<div class="episode-body">
					<h1>Dr. Martin Luther King Jr.</h1>
					<p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt. Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt.</p>
					
					<div class="audio-player">
						<audio src="audio/Test.mp3" id="episode-player" controls preload="auto"></audio>
						<div id="controls" style="display:none;">
							<button id="play-pause" title="play" onclick="togglePlayPause()"><i class='fa fa-play'></i></button>
							<button id="volume-button" title="volume" onclick="showHideVolume()"><i class='fa fa-volume-up'></i></button>
							<div id="progress-text"></div>
<!-- 							<div id="audio-progress-bar"><span id="audio-progress"></span></div> -->
							<input id="audio-progress" min="0" max="100" step="0.01" value="0" type="range" onchange="updateTime()" oninput="updateTime()"/>
							<input id="volume-slider" min="0" max="1" step="0.0001" value="1" type="range" onchange="setVolume()" oninput="setVolume()"/>
						</div>
						<script>
							var audio = document.getElementById("episode-player");
						  audio.controls = false;
						  
						  audio.currentTime = 0.01;
						  
						  function getParameterByName(name, url) { //Thanks to http://stackoverflow.com/a/901144/1224973
							  if (!url) url = window.location.href;
							  name = name.replace(/[\[\]]/g, "\\$&");
							  var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)", "i"),
							    results = regex.exec(url);
							  if (!results) return null;
							  if (!results[2]) return '';
							  return decodeURIComponent(results[2].replace(/\+/g, " "));
							}
							
							var urlSetTime = getParameterByName('time');
							
							if(urlSetTime) {
								audio.currentTime = urlSetTime;
							}
						  
						  var controls = document.getElementById("controls");
						  controls.style.display = 'inline';
						  						  
						  function togglePlayPause() {
							  var playpause = document.getElementById("play-pause");
							  if (audio.paused || audio.ended) {
							    playpause.title = "pause";
							    playpause.innerHTML = "<i class='fa fa-pause'></i>";
							    audio.play();
							  }else{
							    playpause.title = "play";
							    playpause.innerHTML = "<i class='fa fa-play'></i>";
							    audio.pause();
							  }
							}
							
							function setVolume() {
							  var volumeSlider = document.getElementById("volume-slider");
							  var volumeButton = document.getElementById("volume-button");
							  
							  audio.volume = volumeSlider.value;
							  if(volumeSlider.value == 0) {
								  volumeButton.innerHTML = "<i class='fa fa-volume-off'> </i><i class='fa fa-times'> </i>";
							  }else if(volumeSlider.value < 0.5) {
								  volumeButton.innerHTML = "<i class='fa fa-volume-down'></i>";
							  }else {
								  volumeButton.innerHTML = "<i class='fa fa-volume-up'></i>";
							  }
							}
							
							function updateProgress() {
							  var progress = document.getElementById("audio-progress");
							  var progressText = document.getElementById("progress-text");
							  var value = 0;
							  if (audio.currentTime > 0) {
							    value = Math.floor((100 / audio.duration) * audio.currentTime);
							  }
							  progress.value = value;
							  progressText.innerHTML = toMinSec(audio.currentTime)+'/'+toMinSec(audio.duration);
							}
							
							function updateTime() {
								var progress = document.getElementById("audio-progress");
								value = Math.floor(progress.value*10)/10;
								
								audio.currentTime = (value/100)*audio.duration;
							}
							
							function toMinSec(num) {
								sec = Math.floor(num % 60);
								return (Math.floor(num/60))+':'+(sec > 10 ? "" + sec: "0" + sec);
							}
							
							audio.addEventListener("timeupdate", updateProgress, false);
							audio.addEventListener("ended", 
								function() { 
									var playpause = document.getElementById("play-pause");
									playpause.title = "play";
								  playpause.innerHTML = "<i class='fa fa-play'></i>"; 
								}, false);
						</script>
					</div>
				</div>
			</div>
		</div>
	</div>
	
</body>
</html>
